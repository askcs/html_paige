<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=no; minimum-scale=1.0;">
    <link rel="stylesheet" type="text/css" href="style/main.css" />
<!--     <link href='http://fonts.googleapis.com/css?family=Squada+One' rel='stylesheet' type='text/css'> -->
    <script src="js/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="js/timeout.js" type="text/javascript"></script>
    
    <script type="text/javascript">
  	$(document).ready(function(){
		
  		$("#toggleMenu").click(function () {
		    $(this).toggleClass("notActive, active");
		    $("#headerMenu").toggleClass("displayNone");
	    }); 
  		
  		$("#timeoutButton").click(function () {
		    $(this).toggleClass("notPushed, pushed");
	    });    

	});
	
  	var d = document;
  	var safari = (navigator.userAgent.toLowerCase().indexOf('safari') != -1) ? true : false;
  	var gebtn = function(parEl,child) { return parEl.getElementsByTagName(child); };
  	onload = function() {
  	    
  	    var body = gebtn(d,'body')[0];
  	    body.className = body.className && body.className != '' ? body.className + ' has-js' : 'has-js';
  	    
  	    if (!d.getElementById || !d.createTextNode) return;
  	    var ls = gebtn(d,'label');
  	    for (var i = 0; i < ls.length; i++) {
  	        var l = ls[i];
  	        if (l.className.indexOf('label_') == -1) continue;
  	        var inp = gebtn(l,'input')[0];
  	        if (l.className == 'label_check') {
  	            l.className = (safari && inp.checked == true || inp.checked) ? 'label_check c_on' : 'label_check c_off';
  	            l.onclick = check_it;
  	        };
  	        if (l.className == 'label_radio') {
  	            l.className = (safari && inp.checked == true || inp.checked) ? 'label_radio r_on' : 'label_radio r_off';
  	            l.onclick = turn_radio;
  	        };
  	    };
  	};
  	var check_it = function() {
  	    var inp = gebtn(this,'input')[0];
  	    if (this.className == 'label_check c_off' || (!safari && inp.checked)) {
  	        this.className = 'label_check c_on';
  	        if (safari) inp.click();
  	    } else {
  	        this.className = 'label_check c_off';
  	        if (safari) inp.click();
  	    };
  	};
  	var turn_radio = function() {
  	    var inp = gebtn(this,'input')[0];
  	    if (this.className == 'label_radio r_off' || inp.checked) {
  	        var ls = gebtn(this.parentNode,'label');
  	        for (var i = 0; i < ls.length; i++) {
  	            var l = ls[i];
  	            if (l.className.indexOf('label_radio') == -1)  continue;
  	            l.className = 'label_radio r_off';
  	        };
  	        this.className = 'label_radio r_on';
  	        if (safari) inp.click();
  	    } else {
  	        this.className = 'label_radio r_off';
  	        if (safari) inp.click();
  	    };
  	};
  	
  	
  	var login = function(){
  	   	/*code for login from login_classic*/
        var usrName = $('#loginuuid').val().toLowerCase();
        var passStr = $('#loginpass').val();
        var passHash = MD5(passStr);
        
        if(usrName == "" || passStr == ""){
        	alert("Please fill the user name and password.")
        	return false;
        }
        
        $.Read({
            url: session.appServices + 'login',
            xhrFields: {
                withCredentials: true
            },
            data: {
                "uuid": '' + usrName,
                "pass": '' + passHash
            },
            200: function(data){
                console.log("received 200 ok on login.");
                window.handle_session(JSON.parse(data.responseText)["X-SESSION_ID"]); 
            },
            400: function(data){
                localStorage['password'] = '';//                              
                alert("Login failed: Please check your email or password");
            },
            error: function() {
            	alert("Login failed: Connection error.");
            }
        });
        return false;	
  	}
  	
	</script>
    
    
    <title>Time out!</title>
  </head>

  <body>
  	<div id="contentContainer" class="loginPage">
        <div id="logo">
        	<a href="home.html"><div id="logoImage"></div></a>
        	<p>Time out!</p>
        </div>

        <form id='loginForm' name="LoginForm" method='POST' autocomplete='on' data-ajax="false" onsubmit="return login();">
            <input type='text' class="uname" name='uuid' id='loginuuid' placeholder='Emailadres' required/>
            <input type="password" class="pwd" name='pass' id='loginpass' placeholder='Wachtwoord' required/>
            <label class="label_check" for="sample-check">
			    <input name="sample-check" id="sample-check" value="1" type="checkbox" class="rememberBox" />
			    Onthoud mij
			</label>
            
            
            <input type="submit" id="loginButton" class="button" value='Inloggen'/>
            
            <div style="text-align:right; color:#fff; margin-top:20px;">
            <a href="forgotpass.html" style="font-weight:normal; color:white; text-align:right; text-shadow:none; margin-right:5px;">Wachtwoord vergeten?</a>
            |
            <a href="register.html" style="font-weight:normal; text-shadow:none; color:white; margin-left:5px;">Registreren</a>
            </div>
        </form>
</div>
            

        </div>
    </div>
</body>
</html>
